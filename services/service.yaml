apiVersion: v1
kind: Service
metadata:
  name: pipeln-backend
spec:
  selector:
    app: pipeln-backend
  ports:
    - port: 80
      targetPort: 80

---
apiVersion: v1
kind: Secret
metadata:
  name: pipeln-backend-secret
type: kubernetes.io/tls
data:
  # the data is abbreviated in this example
  tls.crt: |
    MIIFSTCCAzGgAwIBAgIUFd/lKbkC+ADoLIrz90jJa7NAPmYwDQYJKoZIhvcNAQELBQAwNDELMAkGA1UEBhMCQVQxDzANBgNVBAcMBlZpZW5uYTEUMBIGA1UECgwLUGlwZWxuIEluYy4wHhcNMjIwNTA2MTAyMzI4WhcNMjMwNTA2MTAyMzI4WjA0MQswCQYDVQQGEwJBVDEPMA0GA1UEBwwGVmllbm5hMRQwEgYDVQQKDAtQaXBlbG4gSW5jLjCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAJT4YDxWPRyZ7Yo3EO7ZmWung8Y3l8QIaibe+D7t+Ds9gw3SuTKH7HPDAPcWbFSM6s4fMjrUDjANy/MHoARHBShNugngSZCeTYBeMzG9+0c0JnTrNId7+gcz94RLe0QyxjsdmqDBYAHROBevHFQ/WmC9bvaZ0TW5DMGxmzuhWYrYDfPBFhmBPdOWADtM0si4gz0HnDvPGaSjAaWbRmx3WJW3RCkJMn5RjckQ9lGP7GKgm0s+xrMtj0wEii/i014rivFdOp1d2vmlrvb7Won50EgHOXCB0SWf1o5tVxJlsh1DZXAina0uVC72xmPdVLagSRxG1dRi0Zc8zpPXKHg/vm6nargzoB8tr1iTEmFnZboCrzJ2FWccmpIwgWe26eIc7lW3Nch0Ci0fGp+zPUoUkC7BO/rxvr3JAb+/hBOzGzfHvDq1NUQi9MEIHOQ51LscyL/P8+HdOo7YGe/52PPujzYW3RurV42HExmEhfyk5cWE6hQZtp1CHwVbg/OFmc8Qo+A1WaUwXi3JsbZF1rELb/bvGAc1NboLxLRPBMKYKWW+HQ+6WKR59dSgJ/rR7VaIK8NjNyWvGLlgkX0XHcK/tOVt0dkqgl8wUDS14jWb8/Rl1GOeKOy2Us1iFXM0Vos1z8mA3t2a1BR2MpBNxZzK8uZwIdAon4+SpoSblSoddXSDAgMBAAGjUzBRMB0GA1UdDgQWBBQdKFNY/Cq0tKrnU0s6xfaH84LhyTAfBgNVHSMEGDAWgBQdKFNY/Cq0tKrnU0s6xfaH84LhyTAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4ICAQAosN5phO1EfakA9s5+DfkyiDgdYKloWuPV8wJ3kpBXtzBGHjYmo4+nOqfu79grvRAbleJUyvosAJqSScuvYhVQ+x7ILQW6auiEsidShn3ciwPKNwzWysLeSZak9qbaPOGC1LsP5w/pCGvWZWv3w/ddVk2UEJK+Xn/g3j5Ylz+HbX9NijTZCBmvlz5NIOSrYctcmjGtbMT2vEvVEbQeZ8yUd7Mas/6idjsAnbdcK1744HMpDSrzdTxExDel4Pqf/CvTTcOicCAUjhBh9pj8JtnOefSBjTBOfQvBrBEV5TNXs4hpqLnEoR2+/lNx0B4NV2d9DGvkly9Fqx4HsqkYl8Zfs4vHZbZnhiiL/2CePPQxD83yRmy/ajwyeXfOi9O9JY5Ftx+w34tN7EKz78yYpFwcybGNnZhc2lln36uCBHCL9M3nLDKect+1BO1+d+uVfCNBKfw1YbnH2zCo5HWAuNqhph89grKoEQBDKsxowvrBCyvVtnfN+q045WxHui+8SM93haFyDOKL5HYhVknas0ChVP78JT6irnzV/VYf+tH2/bXnaZuA17/FrBMlZ34SeD38Kgq6bUghBWWzGqe1mCzIQgA6Lz3O3dncUUzKX1l9aAUDjBDbhRrvepdlzTeve5YeaWMk/pU1lZLV6/HY2nN/R8qdMBQ575rbEFbMLT8D5Q==
  tls.key: |
    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

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: pipeln-backend
  annotations:
    kubernetes.io/ingress.class: azure/application-gateway
    appgw.ingress.kubernetes.io/ssl-redirect: "true"
    # service.beta.kubernetes.io/azure-dns-label-name: pipelnservices
spec:
  tls:
    - secretName: pipeln-backend-secret
  rules:
    - http:
        paths:
          - path: /
            backend:
              service:
                name: pipeln-backend
                port:
                  number: 80
            pathType: Exact
